---
title: 手数料の決定  
description: 適正なインセンティブ額を計算する  
updated: 2024-06-09  
authors: [andyvargtz]  
icon: BookOpen  

---

## **リレイヤーの経済的考慮事項**  

### **リレイヤーへのインセンティブの決定**  

最初に考えるべきことは、 「メッセージを確実に届けてもらうために、リレイヤーにどれくらい支払うべきか？」 という点です。この答えはシンプルですが、ある程度の分析が必要です。インセンティブ額は、最低でもリレイヤーがメッセージを送信するために負担するコストを上回る必要があります。  

これまでのレッスンで述べたように、リレイヤーがメッセージを宛先チェーンに届けるためには、メッセージ内で指定された `requiredGasLimit` 分のガスを送信する必要があります。メッセージの実行が成功するかどうかに関係なく、このガスが使用されるため、リレイヤーが負担するコストは次のように計算できます。  

**コスト = requiredGasLimit × ガス価格（ネイティブトークン単位） × ネイティブトークン価格**  

一方、リレイヤーがメッセージを送信することで得られる収益は以下のようになります。  

**収益 = Fee_Amount × ERC20トークンの価格**  

リレイヤーの運用コストを考慮しない場合、**コスト < 収益** となるように設定すれば、リレイヤーにとってメッセージを送信することが利益につながります。  

クロスチェーン dApp 内で実行するメッセージの種類やアクションによって、必要なガス量が異なるため、適正な報酬を設定することが重要です。例えば、ERC20 トークンのMintを行うにあたって、新しいトークンコントラクトをデプロイする方がトークンの新規ミントよりも多くのガスが必要となります。そのため、作成メッセージの送信には、Mint処理を行うメッセージよりも高い報酬を設定するのが妥当です（`requiredGasLimit` に基づく）。  

---

### **具体的な計算例**  

リレイヤーがメッセージを送信するための最低限の手数料を計算してみましょう。  

以下の前提条件を考えます。  
- C-Chain から Dispatch にメッセージを送信する。  
- インセンティブは ERC20 トークン TLP で支払われる。  
- Dispatch チェーンでは DIS トークンが手数料として使用される。  
- *DIS の価格 = TLP の価格* とする。  
- リレイヤーは最低 10% の利益が見込める場合にのみメッセージを処理する。  
- メッセージの `requiredGasLimit` は **10,000 ガス** に設定。  
- Dispatch チェーンのガス価格 = **50 nDIS（DIS × 10⁻⁹）**  

<Callout>TLPトークンはとDISトークンはERC-20形式のトークンです。</Callout>  


#### **手数料の計算**  

リレイヤーがこのメッセージを送信するためにかかるコストは以下の通り。  

**コスト = 10,000 × 50 × DIS価格**  

リレイヤーが 10% の利益を確保するため、収益は以下のように計算されます。  

**収益 = 1.1 × コスト**  

したがって、  

**TLP価格 × 送信量 = 1.1 × 10,000 × 50 × DIS価格**  

前提として **TLP価格 = DIS価格** であるため、  

**送信量 = 1.1 × 10,000 × 50**  
**送信量 = 550,000 nTLP**  
**送信量 = 550,000,000,000,000 weiTLP**  

Solidity ではすべての金額を `wei` 単位で記述する必要があるため、`nTLP`（10⁻⁹）から `wei`（10⁻¹⁸）へ変換する際には単位変換ツールを使用してください。  

<Quiz quizId="316"/>  