---
title: AWM ãƒªãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ä»˜ä¸  
description: é€å—ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹  
updated: 2024-06-09  
authors: [andyvargtz]  
icon: Terminal  
---

## é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚’è¿½åŠ   

ERC20 ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãƒªãƒ¬ã‚¤ãƒ¤ãƒ¼ã«æ”¯æ‰•ã†ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”¨æ„ã§ããŸã®ã§ã€é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚’çµ„ã¿è¾¼ã¿ã¾ã—ã‚‡ã†ã€‚  

ä»¥ä¸‹ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ä½¿ç”¨ã™ã‚‹éš›ã€**`destinationBlockchainID` ã‚’ç¾åœ¨ã®ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã®ã‚‚ã®ã«æ›´æ–°** ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚

```solidity title="contracts/interchain-messaging/incentivize-relayer/senderWithFees.sol"
// (c) 2023, Ava Labs, Inc. All rights reserved.
// See the file LICENSE for licensing terms.

// SPDX-License-Identifier: Ecosystem

pragma solidity ^0.8.18;

import "@teleporter/ITeleporterMessenger.sol";
import {IERC20} from "@openzeppelin/contracts@4/token/ERC20/IERC20.sol"; // [!code highlight]

contract SenderWithFeesOnCChain {
    ITeleporterMessenger public immutable messenger = ITeleporterMessenger(0x253b2784c75e510dD0fF1da844684a1aC0aa5fcf);
    /**
     * @dev Sends a message to another chain.
     */
    function sendMessage(address destinationAddress, string calldata message, address feeAddress) external {
        IERC20 feeContract = IERC20(feeAddress); // [!code highlight]
        uint256 feeAmount = 500000000000000; // [!code highlight]
        feeContract.transferFrom(msg.sender, address(this), feeAmount);// [!code highlight]
        feeContract.approve(address(teleporterMessenger),feeAmount); // [!code highlight]

        messenger.sendCrossChainMessage(
            TeleporterMessageInput({
                // Replace with blockchainID of your L1 (see instructions in Readme)
                destinationBlockchainID: 0x108ce15038973062d8628fd20c8c657effe993dd8324297353e350dfc05dacad,
                destinationAddress: destinationAddress,
                feeInfo: TeleporterFeeInfo({feeTokenAddress: feeAddress, amount: feeAmount}), // [!code highlight]
                requiredGasLimit: 100000,
                allowedRelayerAddresses: new address[](0),
                message: abi.encode(message)
            })
        );
    }
}
```

### å¤‰æ›´ç‚¹ã¨é‡è¦ãƒã‚¤ãƒ³ãƒˆ  

ã“ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯ã€ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®å‡¦ç†ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ï¼š

- **ERC20 ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**ï¼ˆ`IERC20` ã‚’ä½¿ç”¨ï¼‰ã—ã€æ‰‹æ•°æ–™ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ‰±ã†ãŸã‚ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œæˆ  
- **ğŸ“œ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ‰‹æ•°æ–™ã‚’ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«é€ä»˜**ï¼ˆ`transferFrom` ã‚’ä½¿ç”¨ï¼‰  
- **ğŸ“œ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ»ãƒã‚§ãƒ¼ãƒ³ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒæ‰‹æ•°æ–™ã‚’åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«æ‰¿èª**ï¼ˆ`approve` ã‚’ä½¿ç”¨ï¼‰  
- **`TeleporterFeeInfo` æ§‹é€ ä½“ã‚’ `sendCrossChainMessage` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å«ã‚ã‚‹**  

ã“ã‚Œã«ã‚ˆã‚Šã€ãƒªãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å¯¾ã—ã¦é©åˆ‡ãªæ‰‹æ•°æ–™ã‚’æ”¯æ‰•ã„ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºå®Ÿãªé€ä¿¡ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚