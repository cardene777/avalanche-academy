---
title: æ‰‹æ•°æ–™ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ãƒ•ãƒ­ãƒ¼  
description: å®Œå…¨ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã—ã€ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹  
updated: 2024-06-09  
authors: [andyvargtz]  
icon: Terminal  
---

import { Step, Steps } from 'fumadocs-ui/components/steps';

å…¨ã¦ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ ã®æº–å‚™ãŒå®Œäº†ã—ãŸã®ã§ã€ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ä»˜ãã®ã‚¯ãƒ­ã‚¹ãƒã‚§ãƒ¼ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã§ãã¾ã™ã€‚  
ä»¥ä¸‹ã®æ‰‹é †ã§é€ä¿¡ãƒ•ãƒ­ãƒ¼ã‚’å®Œäº†ã•ã›ã¾ã—ã‚‡ã†ã€‚

- C-Chain ã«é€ä¿¡å…ƒã¨ãªã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤  
- `myblockchain` ã«å—ä¿¡å…ˆã¨ãªã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤  
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡è€…ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã« ERC20 ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½¿ç”¨ã‚’æ‰¿èªï¼ˆ`approve`ï¼‰  
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡  

<Steps>
<Step>

### é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤  

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚  

```bash
forge create --rpc-url local-c --private-key $PK contracts/interchain-messaging/incentivize-relayer/senderWithFees.sol:SenderWithFeesOnCChain
```

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```
[â Š] Compiling...
[â ’] Compiling 2 files with Solc 0.8.18
[â ¢] Solc 0.8.18 finished in 92.98ms
Compiler run successful!
Deployer: 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC
Deployed to: 0xa4DfF80B4a1D748BF28BC4A271eD834689Ea3407 // [!code highlight]
Transaction hash: 0xb0ff20527818fcc0836944a13ddb3b336b95047d434bb52f6c064ab407950166
```

</Step>
<Step>

### é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿å­˜  

```bash
export SENDER_ADDRESS=0xa4DfF80B4a1D748BF28BC4A271eD834689Ea3407
```

</Step>
<Step>

### å—ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ãƒ‡ãƒ—ãƒ­ã‚¤  

æ¬¡ã«ã€å—ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚  

```bash
forge create --rpc-url myblockchain --private-key $PK contracts/interchain-messaging/incentivize-relayer/receiverWithFees.sol:ReceiverOnSubnet
```

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```
[â Š] Compiling...
[â ¢] Compiling 1 files with Solc 0.8.18
[â †] Solc 0.8.18 finished in 105.36ms
Compiler run successful!
Deployer: 0x8db97C7cEcE249c2b98bDC0226Cc4C2A57BF52FC
Deployed to: 0xe336d36FacA76840407e6836d26119E1EcE0A2b4 // [!code highlight]
Transaction hash: 0x379f0a4b875effc9b80a33f039d9a49404514e7aabaef4490f57b56fb4818f65
```

</Step>
<Step>

### å—ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿å­˜  

```bash
export RECEIVER_ADDRESS=0xe336d36FacA76840407e6836d26119E1EcE0A2b4
```

</Step>
<Step>

### ERC20 ãƒˆãƒ¼ã‚¯ãƒ³ã®ä½¿ç”¨è¨±å¯ã‚’è¨­å®š  

ğŸ‘© ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡è€…ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¯ã€é€ä¿¡ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒæ‰‹æ•°æ–™ã¨ã—ã¦ ERC20 ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«æ‰¿èªï¼ˆ`approve`ï¼‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€FEE ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã® `approve` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦æ‰¿èªã—ã¾ã™ã€‚

```bash
cast send --rpc-url local-c --private-key $PK $ERC20_fee_address "approve(address,uint256)" $SENDER_ADDRESS 500000000000000
```

</Step>
<Step>

### ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡  

```bash
cast send --rpc-url local-c --private-key $PK $SENDER_ADDRESS "sendMessage(address, string, address)" $RECEIVER_ADDRESS "Hello" $ERC20_fee_address
```

</Step>
<Step>

### å—ä¿¡ãƒã‚§ãƒ¼ãƒ³ä¸Šã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå—ä¿¡ã•ã‚ŒãŸã‹ç¢ºèª  

```bash
cast call --rpc-url myblockchain $RECEIVER_ADDRESS "lastMessage()(string)"
```

```bash
"Hello"
```

ğŸ‰ **æˆåŠŸï¼** ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç›®çš„ã®ãƒã‚§ãƒ¼ãƒ³ã«é€ä¿¡ã•ã‚Œã€ãƒªãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸ã®ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–ã‚‚é©ç”¨ã•ã‚Œã¾ã—ãŸã€‚

</Step>
</Steps>